<!--注文履歴詳細ページ-->

<div class="container">
  <div class="row">
    <!--見出し-->
    <div class="col-md-2" style="text-align: center;">
      <h4>注文履歴詳細</h4>
    </div>
    <!--内容表示1-->
    <div class="col-md-7">
      <table class="table" style="table-layout: fixed; word-wrap: break-word;">
        <!--テーブル見出し-->
        <thead>
          <tr>
            <th></th>
            <th>製品名</th>
            <th>価格(税込)</th>
            <th>注文個数</th>
          </tr>
        </thead>
        <!--テーブル内容表示-->
        <tbody>
          <% @order.product_orders.each do |product_order| %>
          <tr>
            <!--製品画像-->
            <td><%= image_tag product_order.product.image, size: "50x50" %></td>
            <!--製品名-->
            <td><%= product_order.product.name %></td>
            <!--税込価格-->
            <td><%= product_order.product.with_tax_price %> 円</td>
            <!--注文数-->
            <td><%= product_order.quantity %></td>
          </tr>
         <% end %>
        </tbody>
      </table>
    </div>
    <!--内容表示2-->
    <div class="col-md-3">
      <table class="table" style="table-layout: fixed; word-wrap: beak-word;">
        <!--合計金額-->
        <tr>
          <th>合計金額</th>
          <td><%= @total %> 円</td>
        </tr>
        <!--送料-->
        <tr>
          <th>送料</th>
          <td><%= @order.postage %> 円</td>
        </tr>
        <!--請求金額-->
        <tr>
          <th>請求金額</th>
          <td><%= @order.billing_amount %> 円</td>
        </tr>
      </table>
    </div>
  </div>
  <div class="row">
    <!--表示内容3-->
    <div class="col" style="margin-top: 50px; text-align: center; margin-bottom: 30px;">
      <!--注文状況-->
      <div class="status">
        <strong>注文状況</strong><br>
        <%= @order.status_i18n %>
        <%= form_with model: @order, url: admin_order_path(@order), method: :patch do |f| %>
        <%= f.select :status, Order.statuses_i18n.invert %>
        <%= f.submit "変更" %>
        <% end %>
      </div>
      <br>
      <div class="making-status">
        <strong>製造状況</strong>
        <% @product_orders.each do |product_order| %>
          <%= form_with model: product_order, url: admin_product_order_path, method: :patch do |f| %>
          <%= f.select :making_status, ProductOrder.making_statuses_i18n.invert %>
          <%= f.submit "更新" %>
          <% end %>
        <% end %>
      </div>
      <br>
      <!--受取方法-->
      <div class="payment_method">
        <strong>受取方法</strong><br>
          <%= @order.payment_method_i18n %>
      </div>
    </div>
  </div>
</div>